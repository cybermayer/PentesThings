#!/bin/bash

# Function to display usage instructions
usage() {
    echo "Usage: $0 \"search_string\" input_file.csv -o output_file.lst"
    exit 1
}

# Check if the correct number of arguments is provided
if [ $# -ne 4 ]; then
    usage
fi

# Assign arguments to variables
search_string=$1
input_file=$2
output_flag=$3
output_file=$4

# Validate the output flag
if [ "$output_flag" != "-o" ]; then
    usage
fi

# Process the file and extract strings
grep -F "$search_string" "$input_file" | awk -F'\\[' '{print $2}' | awk -F',' '{print $1}' > "$output_file"

echo "Strings have been extracted to $output_file."