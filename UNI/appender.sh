#!/bin/bash

#This script appends a string to every line of a file.
#The string has to be provided as first argument.
#The filepath has to be provided as second argument.
#The output filename can be specified with -o option.

#Check if at least three arguments are provided (including -o)
if [ $# -lt 3 ]; then
    echo "Usage: $0 <append_string> <filename.lst> -o <output_filename.lst>"
    exit 1
fi

#Initializing variables
append_string="$1"
filename="$2"
output_file=""

#Check if the file exists
if [ ! -f "$filename" ]; then
    echo "Error: File $filename not found."
    exit 1
fi

#Parse command line arguments
while [ "$#" -gt 0 ]; do
    case "$1" in
        -o)
            shift
            output_file="$1"
            ;;
        *)
            #Ignore other arguments
            ;;
    esac
    shift
done

#If output_file is still empty, create a default output filename based on input filename
if [ -z "$output_file" ]; then
    output_file="${filename%.lst}_modified.lst"
fi

#Loop through each line in the input file, append the specified string to each line,
#and write the modified lines to the output file
while IFS= read -r line; do
    echo "${line}${append_string}" >> "$output_file"
done < "$filename"

echo "Modification complete. Modified lines written to $output_file."
