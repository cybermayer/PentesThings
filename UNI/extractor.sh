#!/bin/bash

# Function to display usage instructions
usage() {
    echo "Usage: $0 \"the_string\" input_filename.txt -o output_filename.txt -option (-s/-e/-c)"
    exit 1
}

# Check if the correct number of arguments is provided
if [ $# -ne 5 ]; then
    usage
fi

# Assign arguments to variables
search_string=$1
input_file=$2
output_flag=$3
output_file=$4
option=$5

# Validate the output flag
if [ "$output_flag" != "-o" ]; then
    usage
fi

# Validate the option
if [ "$option" != "-s" ] && [ "$option" != "-e" ] && [ "$option" != "-c" ]; then
    usage
fi

# Process the file based on the option
case $option in
    -s) grep "^$search_string" "$input_file" > "$output_file" ;;
    -e) grep "$search_string$" "$input_file" > "$output_file" ;;
    -c) grep "$search_string" "$input_file" > "$output_file" ;;
    *) usage ;;
esac

echo "Lines have been extracted to $output_file based on the option $option."
